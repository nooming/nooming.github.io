const LANG=document.documentElement.lang||"en";let BASE_COIN_RESULT,BASE_COIN_RECENT_RESULTS,BASE_COIN_HEADS_COUNT,BASE_COIN_TAILS_COUNT,BASE_COIN_TOTAL_COUNT;"en"===LANG?(BASE_COIN_RESULT="base_Ku8K3cGn_coinResult",BASE_COIN_RECENT_RESULTS="base_Ku8K3cGn_coinRecentResults",BASE_COIN_HEADS_COUNT="base_Ku8K3cGn_coinHeadsCount",BASE_COIN_TAILS_COUNT="base_Ku8K3cGn_coinTailsCount",BASE_COIN_TOTAL_COUNT="base_Ku8K3cGn_coinTotalCount"):"zh"===LANG&&(BASE_COIN_RESULT="base_KqT8oo80_coinResult",BASE_COIN_RECENT_RESULTS="base_KqT8oo80_coinRecentResults",BASE_COIN_HEADS_COUNT="base_KqT8oo80_coinHeadsCount",BASE_COIN_TAILS_COUNT="base_KqT8oo80_coinTailsCount",BASE_COIN_TOTAL_COUNT="base_KqT8oo80_coinTotalCount");var coinRecentHistorys=JSON.parse(localStorage.getItem(BASE_COIN_RECENT_RESULTS)||"[]");function updateCoinStats(e){let t=parseInt(localStorage.getItem(BASE_COIN_HEADS_COUNT))||0,o=parseInt(localStorage.getItem(BASE_COIN_TAILS_COUNT))||0,n=parseInt(localStorage.getItem(BASE_COIN_TOTAL_COUNT))||0;"heads"===e&&t++,"tails"===e&&o++,n++,localStorage.setItem(BASE_COIN_HEADS_COUNT,t),localStorage.setItem(BASE_COIN_TAILS_COUNT,o),localStorage.setItem(BASE_COIN_TOTAL_COUNT,n);const a=document.querySelector(".coin-info-box");a&&(a.style.display=0===n?"none":"block");const c=document.querySelector(".coin-info-stats-heads-value-box"),i=document.querySelector(".coin-info-stats-tails-value-box"),s=document.querySelector(".coin-info-stats-total-value-box");animateNumberIfChanged(c,t),animateNumberIfChanged(i,o),animateNumberIfChanged(s,n)}function animateNumberIfChanged(e,t){const o=parseInt(e.textContent)||0;o!==t&&(smoothNumber(e,o,t,400),e.classList.remove("number-bump"),e.offsetWidth,e.classList.add("number-bump"))}function smoothNumber(e,t,o,n=400){const a=performance.now();requestAnimationFrame(function c(i){const s=Math.min((i-a)/n,1);e.textContent=Math.floor(t+(o-t)*s),s<1&&requestAnimationFrame(c)})}function loadCoinStats(){const e=parseInt(localStorage.getItem(BASE_COIN_HEADS_COUNT))||0,t=parseInt(localStorage.getItem(BASE_COIN_TAILS_COUNT))||0,o=parseInt(localStorage.getItem(BASE_COIN_TOTAL_COUNT))||0,n=document.querySelector(".coin-info-box");n&&(n.style.display=0===o?"none":"block"),document.querySelector(".coin-info-stats-heads-value-box").textContent=e,document.querySelector(".coin-info-stats-tails-value-box").textContent=t,document.querySelector(".coin-info-stats-total-value-box").textContent=o}function resetCoinStats(){localStorage.removeItem(BASE_COIN_RESULT),localStorage.removeItem(BASE_COIN_RECENT_RESULTS),localStorage.removeItem(BASE_COIN_HEADS_COUNT),localStorage.removeItem(BASE_COIN_TAILS_COUNT),localStorage.removeItem(BASE_COIN_TOTAL_COUNT),loadCoinStats()}function canvasConfettiFireworks(){let e=Date.now()+5e3,t={startVelocity:30,spread:360,ticks:60,zIndex:9999};function o(e,t){return Math.random()*(t-e)+e}let n=setInterval(function(){let a=e-Date.now();if(a<=0)return clearInterval(n);let c=a/5e3*50;confetti({...t,particleCount:c,origin:{x:o(.1,.3),y:Math.random()-.2}}),confetti({...t,particleCount:c,origin:{x:o(.7,.9),y:Math.random()-.2}})},250)}function playClickSound(){const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),o=e.createGain();t.type="sine",t.frequency.setValueAtTime(880,e.currentTime),o.gain.setValueAtTime(.2,e.currentTime),o.gain.exponentialRampToValueAtTime(.001,e.currentTime+.6),t.connect(o),o.connect(e.destination),t.start(),t.stop(e.currentTime+.6)}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("coin"),t=document.querySelector(".coin-info-inner"),o=localStorage.getItem(BASE_COIN_RESULT);e.style.transform="tails"===o?"translateY(0) rotateX(180deg)":"translateY(0) rotateX(0deg)";let n=!1;function a(e){const o=document.createElement("div");o.className="coin-recent-item",o.style.backgroundColor="heads"===e?"#ffd700":"#c0c0c0","en"===LANG?o.textContent="heads"===e?"H":"T":"zh"===LANG&&(o.textContent="heads"===e?"正":"反"),o.title="heads"===e?"Heads":"Tails",t.insertBefore(o,t.firstChild),t.parentElement.scrollLeft=t.scrollWidth}e.addEventListener("click",function(){if(n)return;startFlip(),n=!0;const t=Math.random()<.5,o=t?3600:3780;e.style.setProperty("--final-rotation",`${o}deg`),e.classList.remove("flip-active"),e.offsetWidth,e.classList.add("flip-active"),e.addEventListener("animationend",function c(){e.removeEventListener("animationend",c),playClickSound(),e.style.transform=`translateY(0) rotateX(${o}deg)`;const i=t?"heads":"tails";localStorage.setItem(BASE_COIN_RESULT,i),e.classList.remove("flip-active"),n=!1,updateCoinStats(i),function(e){coinRecentHistorys.push(e),coinRecentHistorys.length>1024&&coinRecentHistorys.shift();localStorage.setItem(BASE_COIN_RECENT_RESULTS,JSON.stringify(coinRecentHistorys)),a(e)}(i)})}),coinRecentHistorys.forEach(e=>a(e)),function(){const e=t.parentElement;if(!e)return;let o=0;const n=15,a=setInterval(()=>{const t=e.scrollWidth-e.clientWidth,c=t-e.scrollLeft;e.scrollTo({left:t,behavior:"smooth"}),o++,(Math.abs(c)<2||o>n)&&clearInterval(a)},100)}();const c=document.querySelector(".coin-reset-box");document.querySelector(".coin-reset-scope-box");c&&c.addEventListener("click",function(){setTimeout(()=>{resetCoinStats(),coinRecentHistorys=JSON.parse(localStorage.getItem(BASE_COIN_RECENT_RESULTS)||"[]"),document.querySelector(".coin-info-inner").innerHTML=""},1e3)})}),loadCoinStats();const coinFlipScopeBoxElement=document.querySelector(".coin-flip-scope-box"),coinElement=document.querySelector(".coin");function startFlip(){coinFlipScopeBoxElement.classList.add("is-flipping"),coinElement.addEventListener("animationend",()=>{coinFlipScopeBoxElement.classList.remove("is-flipping")},{once:!0})}